name: Build ZMK firmware
on: [push, pull_request, workflow_dispatch]

jobs:
  build:
    uses: zmkfirmware/zmk/.github/workflows/build-user-config.yml@main
    with:
      config_path: zmk_config
      build_matrix_path: '{"include":[{"board":"seeeduino_xiao_ble","shield":"toucan_left rgbled_adapter nice_view_gem","snippet":"studio-rpc-usb-uart","cmake-args":"-DCONFIG_ZMK_STUDIO=y -DZMK_CONFIG=mac_onishi","artifact-name":"toucan_left_mac_onishi"},{"board":"seeeduino_xiao_ble","shield":"toucan_right rgbled_adapter","cmake-args":"-DZMK_CONFIG=mac_onishi","artifact-name":"toucan_right_mac_onishi"},{"board":"seeeduino_xiao_ble","shield":"settings_reset","cmake-args":"-DZMK_CONFIG=mac_onishi","artifact-name":"settings_reset_mac_onishi"},{"board":"seeeduino_xiao_ble","shield":"toucan_left rgbled_adapter nice_view_gem","snippet":"studio-rpc-usb-uart","cmake-args":"-DCONFIG_ZMK_STUDIO=y -DZMK_CONFIG=mac_qwerty","artifact-name":"toucan_left_mac_qwerty"},{"board":"seeeduino_xiao_ble","shield":"toucan_right rgbled_adapter","cmake-args":"-DZMK_CONFIG=mac_qwerty","artifact-name":"toucan_right_mac_qwerty"},{"board":"seeeduino_xiao_ble","shield":"settings_reset","cmake-args":"-DZMK_CONFIG=mac_qwerty","artifact-name":"settings_reset_mac_qwerty"},{"board":"seeeduino_xiao_ble","shield":"toucan_left rgbled_adapter nice_view_gem","snippet":"studio-rpc-usb-uart","cmake-args":"-DCONFIG_ZMK_STUDIO=y -DZMK_CONFIG=win_onishi","artifact-name":"toucan_left_win_onishi"},{"board":"seeeduino_xiao_ble","shield":"toucan_right rgbled_adapter","cmake-args":"-DZMK_CONFIG=win_onishi","artifact-name":"toucan_right_win_onishi"},{"board":"seeeduino_xiao_ble","shield":"settings_reset","cmake-args":"-DZMK_CONFIG=win_onishi","artifact-name":"settings_reset_win_onishi"},{"board":"seeeduino_xiao_ble","shield":"toucan_left rgbled_adapter nice_view_gem","snippet":"studio-rpc-usb-uart","cmake-args":"-DCONFIG_ZMK_STUDIO=y -DZMK_CONFIG=win_qwerty","artifact-name":"toucan_left_win_qwerty"},{"board":"seeeduino_xiao_ble","shield":"toucan_right rgbled_adapter","cmake-args":"-DZMK_CONFIG=win_qwerty","artifact-name":"toucan_right_win_qwerty"},{"board":"seeeduino_xiao_ble","shield":"settings_reset","cmake-args":"-DZMK_CONFIG=win_qwerty","artifact-name":"settings_reset_win_qwerty"}]}'
      archive_name: toucan_firmware
